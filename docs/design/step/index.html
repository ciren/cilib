<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">step</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="CIlib · Predictable and Pure Evolutionary and Swarm Intelligence"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="# Step"><meta data-react-helmet="true" property="og:description" content="# Step"><meta data-react-helmet="true" property="og:url" content="https://cilib.net/docs/design/step">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.d6b4e330.css">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}function e(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}var n=window.matchMedia("(prefers-color-scheme: dark)");n.addListener((function(n){null===e()&&t(n.matches?"dark":"")}));var a=e();null!==a?t(a):n.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo"><strong>CIlib</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/introduction/getting-started">Docs</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/ciren/cilib">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo"><strong>CIlib</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/introduction/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/ciren/cilib">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">step</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="step"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step" title="Direct link to heading">#</a>Step</h1><p>Apart from tracking the effect of randomness, a computational intelligence
algorithm requires some additional information:</p><ul><li>The optimization scheme (<code>Opt</code>) required, either minimization or maximization</li><li>The fitness function evaluation instance, <code>Eval</code>, which calculates the quality of
the candidate solution</li></ul><p>The result is a function, which uses a predefined set of values to generate
a <code>RVar</code> computation to which randomness still needs to be applied. The function
is therefore of the shape</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-undefined codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(Opt,Eval[A]) =&gt; RVar[B]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>The predefined set of values required for input is also referred to as the
&quot;environment&quot;. Given that the environment is decided once, at the beginning of
the execution process, we can factor out this common parameter using a Kleisli
arrow, on this case the <code>ReaderT</code> monad transformer is applicable, resulting
in the final type of:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-undefined codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ReaderT[RVar, (Opt,Eval[A]), B]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Because monad transformers are monads themselves, we can freely compose different
<code>Step</code> instances to create a larger computation. The larger computation, being
termed the &quot;algorithm&quot;. Due to the sequencing action of monads, <code>Step</code> instances
are analogous to steps in algorithm pseudo-code.</p><p>Now that the intention of <code>Step</code> is clearer, lets have a look at some usage. Keep
in mind that even though the final &quot;shape&quot; of the <code>Step</code> is defined, this does not
limit the manner in which we can create <code>Step</code> instances.
Within a PSO, each particle has several actions applied to it, in order to create
a new particle that occupies a different location within the problem search space.</p><p>The canonical PSO algorithm iteratively alters the position (and state data) of each
particle to create a new particle for each within the collection. The new collection
essentially replaces the original collection and this process repeats until some
kind of stopping condition is met. Stopping condition logic is intentionally not
included within the <code>Step</code>. The type for a PSO is then</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-undefined codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">List[Particle[S,A]] =&gt; Particle[S,A] =&gt; Step[RVar,(Opt,Eval[A]),Particle[A]]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>and the algorithm definition is:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-scala codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> pso</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">w</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c1</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c2</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cognitive</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Guide</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> social</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> Guide</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">implicit</span><span class="token plain"> M</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> HasMemory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> V</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> HasVelocity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> NonEmptyList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Particle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">=&gt;</span><span class="token plain"> Particle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">=&gt;</span><span class="token plain"> Step</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">Particle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token builtin" style="color:rgb(130, 170, 255)">Double</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  collection </span><span class="token keyword" style="font-style:italic">=&gt;</span><span class="token plain"> x </span><span class="token keyword" style="font-style:italic">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cog     </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> cognitive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    soc     </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> social</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">collection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    vel     </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> stdVelocity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> soc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cog</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> c2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    p       </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> stdPosition</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> vel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    p2      </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> evalParticle</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    p3      </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> updateVelocity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">p2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> vel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    updated </span><span class="token keyword" style="font-style:italic">&lt;-</span><span class="token plain"> updatePBest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">p3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">yield</span><span class="token plain"> updated</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>That sure looks complex! Sure, there are a few things going on there, but it certainly
is not complex - the syntax just makes the intention a little hidden due to the verbosity.
The <code>pso</code> function defines that there are some parameters that it requires
for the <code>stdVelocity</code> function, namely <code>w</code>, <code>c1</code>, <code>c2</code>. Next it requires two individual
<code>Guide</code> instances which are the particle attactors for the velocity update equation. In
the next parameter group is an implicit parameter that is constraining the types of
data elements <code>pso</code> can work with. In this case, the <code>pso</code> requires that all <code>Particle</code>
instances (which is just an alias for the type <code>Entity[S,Position[Double]]</code>)
must have a <code>HasMemory</code> and <code>HasVelocity</code> instance available for the compiler to provide.
As mentioned previously, in the section about lenses and optics, these classy lens instances
prevent <code>Entity</code> types that do not have a memory nor a velocity present in their
state parameter type. Again, we don&#x27;t know what the value of <code>S</code> is at the definition
level, it will be made concrete when we actually use the <code>pso</code> function.</p><p>Every function within the for-comprehension is a function that yields a <code>Step</code> instance
of the type <code>Step[Double,Particle[S,Double]]</code> (in this usage example). The individual
<code>Step</code>s are then composed into a larger composition that ultimately results in the
creation of a new piece of data: the particle which replaces the particle identified
by the parameter <code>x</code>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="iteration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#iteration" title="Direct link to heading">#</a>Iteration</h1><p>Algorithms can be executed either synchronously or asynchronously. Given an
algorithm definition like the definition of <code>pso</code> above, it may be passed into
an iteration function which converts the signature of <code>pso</code> function into the
shape:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-undefined codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">List[Particle[S,A]] =&gt; RVar[A,Particle[S,A]]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>It is important to note that the manner of execution constrains the amount
of parallelism that may be applied to the iteration process. The synchronous
scheme can be completely parallelized as there is no reliance on the currently
building collection. The asynchronous process on the other hand builds the new
collection from a combination of the current and new collections. As a result
of the manner in which the asynchronous process executes, parallelism is not
possible due to the shared state that is managed during the execution process.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/getting-started">Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4></div><div class="col footer__col"><h4 class="footer__title">Social</h4></div></div><div class="text--center">Copyright © 2020 CIlib authors</div></div></footer>
</div>

<script src="/styles.8c689d80.js"></script>

<script src="/runtime~main.6f8e30cb.js"></script>

<script src="/main.67e2120c.js"></script>

<script src="/1.36fed2c7.js"></script>

<script src="/2.ea9d8516.js"></script>

<script src="/1be78505.95ac2644.js"></script>

<script src="/20ac7829.fefa18a6.js"></script>

<script src="/17896441.cfe035ae.js"></script>

<script src="/9f18abe7.469eb83f.js"></script>


</body>
</html>